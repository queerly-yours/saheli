<div class="category-wrapper">
    <div class="category-left-content">
        <div class="category-decade-wrapper">
            <div class="w-100">
                <app-header-lines [years]="categoryData?.decades ?? []" [selectedDecade]="selectedDecade"
                    (selectDecade)="onDecadeClick($event)"></app-header-lines>
            </div>
        </div>
        @if (this.type === paramTypes.Article && fromId) {
        <div class="article-arrow-wrapper" [ngClass]="{'disable-nav': disableArticleNav('PREV')}"
            (click)="getNavArticle('PREV')">
            <div class="arrow bg-gold">
                <ng-icon name="heroChevronLeft" size="20" class="arrow-right"></ng-icon>
            </div>
            <span class="article-nav-text">Previous Article</span>
        </div>
        }
    </div>

    @if (!viewByDecade) {
    @if (type === paramTypes.Article) {
    <div class="article-content">
        <span class="article-title">{{categoryData?.title | customCapitalize:['Net-En']}}</span>
        @if (categoryData?.subtitle) {
        <span class="article-subtitle">{{categoryData?.subtitle | uppercase }}</span>
        }
        <div class="article-dates-wrapper" [ngClass]="{'mt-10': !categoryData?.subtitle}">
            <div>{{categoryData?.publishedDate}}</div>
        </div>
        <div [innerHTML]="getSanitizedValue(categoryData?.value)" class="article-content-wrapper"></div>
    </div>
    } @else {
    <div class="category-content">
        <span class="category-name">{{categoryData?.title | customCapitalize }}</span>
        <div class="category-description-wrapper">
            @for (item of categoryData?.description; track $index) {
            <span class="category-description">{{item}}</span>
            }
        </div>

        @if (categoryData?.subCategoryList?.length || categoryData?.innerCategories?.length ||
        categoryData?.articleList?.length) {
        <span class="category-article-heading">ARTICLES</span>
        }

        @if (categoryData?.subCategoryList?.length || categoryData?.innerCategories?.length) {
        <app-accordion [panels]="categoryData?.subCategoryList ?? categoryData?.innerCategories ?? []"></app-accordion>
        }

        @if (categoryData?.articleList?.length) {
        <div class="category-article-summary">
            @for (item of visibleArticles(categoryData?.articleList); track $index) {
            <app-article-summary [articleSummary]="item"
                (navigateToArticleEvent)="navigateToArticle($event)"></app-article-summary>
            }

            @if (categoryData.articleList.length > initialVisibilityCount && categoryData.articleList.length >
            visibleCount) {
            <button class="see-more" (click)="loadMore()"><b>View More ></b></button>
            }
        </div>
        }

        @if (categoryData?.archiveImg) {
        <div class="archive-img-wrapper" [ngClass]="{'mt-5': !categoryData?.articleList?.length}">
            <span class="category-article-heading">Archive</span>
            <img [src]="categoryData?.archiveImg" width="300" height="300" class="category-archive-img" />
        </div>
        }

        @if (categoryData?.archiveList?.length) {
        <div class="archive-list-wrapper">
            @for (item of categoryData.archiveList; track $index) {
            <div class="archive-wrapper">
                <img [src]="item.archiveImg" width="250" height="250" alt="">
                <span class="archive-title">{{item.title}}</span>
            </div>
            }
        </div>
        }
    </div>
    }
    } @else {
    <div class="category-content">
        <span class="category-name">{{categoryData?.title | customCapitalize}} in {{selectedDecade}}</span>


        @if (decadeWiseArticleList.length) {
        <div class="category-article-summary">
            @for (item of visibleArticles(decadeWiseArticleList); track $index) {
            <app-article-summary [articleSummary]="item"
                (navigateToArticleEvent)="navigateToArticle($event, true)"></app-article-summary>
            }
            @if (decadeWiseArticleList.length > initialVisibilityCount && decadeWiseArticleList.length > visibleCount) {
            <button class="see-more" (click)="loadMore()"><b>View More ></b></button>
            }
        </div>
        }

        @if (categoryData?.archiveImg) {
        <div class="archive-img-wrapper" [ngClass]="{'mt-5': !categoryData?.articleList?.length}">
            <span class="category-article-heading">Archive</span>
            <img [src]="categoryData?.archiveImg" width="300" height="300" />
        </div>
        }
    </div>
    }
    <div class="category-right-content">
        @if (this.type === paramTypes.Article && fromId) {
        <div class="article-arrow-wrapper" [ngClass]="{'disable-nav': disableArticleNav('NEXT')}"
            (click)="getNavArticle('NEXT')">
            <span class="article-nav-text">Next Article</span>
            <div class="arrow bg-gold">
                <ng-icon name="heroChevronRight" size="20" class="arrow-right"></ng-icon>
            </div>
        </div>
        }
    </div>
    <app-category-pop></app-category-pop>
</div>